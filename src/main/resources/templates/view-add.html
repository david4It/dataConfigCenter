
<!DOCTYPE html>
<html xmlns:th="http://www.springframework.org/schema/data/jaxb" xmlns:float="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8">
	<title>后台管理</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="stylesheet" href="lib/layui/css/layui.css" media="all">
	<link rel="stylesheet" href="css/admin.css" media="all">
	<link rel="stylesheet" href="css/steps.min.css" media="all">
	<link rel="shortcut icon" href="../resources/favicon.ico" th:href="@{/images/favicon.ico}">
	<link rel="stylesheet" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css" media="all" />
	<style>
		.left-part{position:absolute;left:0;top:0;width:40%;height:100%;z-index:1;}
		.btn-wrap{background:#f3f3f3;text-align:right;position:relative;z-index:1;box-shadow:0 5px 10px #e8e3e3;}
		.right-part{position:absolute;right:0;top:0;background:#f3f3f3!important;width:60%;height:100%;}
		#sqlArea {margin: 0;height:100%;width:100%;border-right:1px solid #f3f3f3;}
		/* 防止下拉框的下拉列表被隐藏---必须设置--- */
		/* 使得下拉框与单元格刚好合适 */
		td .layui-form-select{
			margin-top: -10px;
			margin-left: -15px;
			margin-right: -15px;
		}

		.layui-table-cell{
			overflow: visible !important;
		}
		.layui-layer-tips{
			display: none
		}
		.varBox{
			border-radius: 0.3rem 0.3rem 0.3rem 0;
			border: 1px solid #6ceb38;
			background-color: #b1ebb4;
		}
		.varBoxLi{
			margin-top: 1rem;
		}
	</style>
</head>
<body class="layui-layout-body">
	<div class="layui-col-md12">
		<div class="layui-navs">
						<span class="layui-breadcrumb" lay-separator="—">
							<a href="javascript:;">基础管理</a>
							<a href="javascript:;">视图管理</a>
							<a><cite>添加视图</cite></a>
						</span>
			<a class="layui-btn layui-btn-small" style="line-height:1.6em;float:right;height: 36px;" href="javascript:location.replace(location.href);" title="刷新">
				<i class="layui-icon layui-icon-refresh" style="line-height:36px;font-size: 16px;"></i>
			</a>
		</div>
	</div>
	<form class="layui-form layui-form-pane" action="" id="frm-reg" >
	<div class="layui-body"  id="firstStep" >
		<div class="layui-layout" style="width: 100%;height:4rem;margin-top: 0px;">
			<div id="steps1"></div>
		</div>
		<fieldset class="layui-elem-field layui-field-title" style="margin-top: 2rem;">
			<legend></legend>
		</fieldset>
		<!-- 填写视图信息，创建sql语句  -->
		<div  class="layui-layout"   style="width: 15%;float:left;margin-left:0.5rem;">
			<div class="layui-form-item">
				<div class="layui-inline">
					<input type="text" name="name" id="name" value="" placeholder="名称" class="layui-input-inline  layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<div class="layui-inline">
					<input type="text" name="description" id="description" value="" placeholder="描述" class="layui-input-inline  layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<div class="layui-inline">
					<div class="layui-input-inline  layer-inputs">
						<select name="source" id="source" lay-verify="required" lay-search="">
							<option value="">请选择</option>
							<option value="1">EPS</option>
						</select>
					</div>
				</div>
			</div>
			<div id="tablesTree"></div>
		</div>
		<div style="margin-left:2px; float:left;width: 1px;height: 100%; background: #eee;"></div>
		<div  style="width: 82%;height:100%;float:left;">
			<div style="width: 75%;height:50%;float:left;margin-left: 1rem;">
				<div class="layui-bg-gray" id="sqlArea"></div>
			</div>

			<div class="layui-bg-gray" style="width: 21%;height:50%;float:left;margin-left: 1rem;">
				<div style="height: 20%;width: 100%">
					<label class="layui-form-label layui-bg-gray">变量</label>
					<button type="button"  style="float:right;margin-right: 2rem"  class=" layui-bg-gray layui-btn layui-btn-primary"
							onclick="execute_open('添加变量', 'view-variable-add.html', '500', '600')"  >
					<i class="layui-icon">+</i></button>
				</div>
				<div id="varArea" style="height: 80%;width: 100%;margin-left: 2rem;">

				</div>

			</div>

			<hr class="layui-bg-gray" style="margin-top: 15rem">
			<div  class="layui-card-body" style="width:100%;min-height: 2rem;float:left;margin-left: 1rem;">
				<input style="float:right;margin-right: 2rem"  class="layui-btn  layui-btn-primary" value="下一步" onclick="goNext()"  >
				<input style="float:right;margin-right: 1rem"  class="layui-btn  layui-btn-primary" value="执行" onclick="queryData()">
				<input style="float:right;margin-right: 1rem" class="layui-btn  layui-btn-primary" value="取消" onclick=""  >
			</div>
			<div style="width: 100%;float:right;margin-left: 1rem;">
				<hr class="layui-bg-gray">
				<div style="margin-left: 2rem;">
					<table class="layui-table layui-form" id="sqlResult"  lay-filter="sqlResult">
					</table>
				</div>
			</div>

		</div>
		<!-- end first step-->

	</div>

	<!-- 下一步跳转，创建数据模型，对数据模型授权 -->
	<div  class="layui-body"  id="secondStep" style="display: none">
		<div class="layui-layout" style="width: 100%;height:4rem;margin-top: 0px;">
			<div id="steps2"></div>
		</div>

		<hr class="layui-bg-gray" style="margin-top: 2rem">
		<div  class="layui-card-body" style="width:100%;min-height: 2rem;float:left;margin-left: 1rem;">
			<input style="float:right;margin-right: 1rem" class="layui-btn  layui-btn-primary" value="取消" onclick="cancel()"  >
			<input style="float:right;margin-right: 1rem"  class="layui-btn  layui-btn-primary" value="保存" onclick="saveModel()">
			<input style="float:right;margin-right: 2rem"  class="layui-btn  layui-btn-primary" value="上一步" onclick="goPast()"  >
		</div>

		<fieldset class="layui-elem-field layui-field-title" style="margin-top: 2rem;">
			<legend></legend>
		</fieldset>
		<div class="layui-tab layui-tab-brief" style="min-height: 20rem;" lay-filter="secondStep">
			<ul class="layui-tab-title">
				<li class="layui-this">数据模型</li>
				<li>模型授权</li>
			</ul>
			<div  class="layui-table layui-form dataModel "  id="dataModel"></div>
			<div id="roleModel"></div>
		</div>
	</div>
	<!-- end second step-->

	</form>
</body>
</html>
<script src="js/jquery-3.4.1.min.js"></script>
<script src="lib/layui/layui.js"></script>
<script src="js/jquery.cookie.min.js"></script>
<script src="js/steps/steps.min.js"></script>
<script src="js/code/ace.min.js"></script>
<script src="js/code/ext-beautify.js"></script>
<script src="js/code/ext-language_tools.js"></script>
<script src="js/code/mode-sql.js"></script>
<script src="js/code/cb-complete-list.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/ace/1.4.12/snippets/sql.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/ace/1.4.12/snippets/mysql.js"></script>

<script src="js/view-add.js"></script>
<script type="text/javascript">

</script>

